<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SO2 deposition simulation</title>
</head>
<body>
	<div id="map"></div>
	<div id = "bottom">
		<div class = "groupContainer" id = "gcL">
			<div class = "sliderContainer" id = "slcLeft">
				<img src="./images/isopleth_large.png" class = "leftImg">
				<input type="range" id="maxValueInput" value = "0.5" max = "10" min="0.5" step = "0.5"/>
				<img src="./images/isopleth_small.png" class = "rightImg">
			</div>
			<div class = "sliderContainer" id = "slcRight">
				<img src="./images/scrubbing_small.png" class = "leftImg">
				<input type="range" id="scrubbingInput" value = "0" max="100" min="0" step="1"/>
				<img src="./images/scrubbing_large.png" class = "rightImg">
			</div>
		</div>

		<div class = "buttonContainer">
			<input type = "image" id = "resetButton" src = "./images/reset_toggle.png" clicked = "0" />
			<input type = "image" id = "playToggle" src = "./images/play_toggle.png" clicked = "0" />
			<input type = "image" id = "sumToggle" src = "./images/sum_toggle.png" clicked = "0" />
		</div>

		<div class = "groupContainer" id = "gcR">
			<div class = "sliderContainer" id = "slcRight">
				<img src="./images/resolution_small.png" class = "leftImg">
				<input type="range" id="resolutionInput" value = "2500" max = "10000" min = "1000" step="500" />
				<img src="./images/resolution_large.png" class = "rightImg">
			</div>
			<div class = "sliderContainer" id = "slcLeft">
				<img src="./images/lowerbound_small.png" class = "leftImg">
				<input type="range" id="cloudinessInput" value = "0.5" max = "1" min="0" step="0.1" />
				<img src="./images/lowerbound_large.png" class = "rightImg">
			</div>
		</div>
	</div>
	<div id = "top">
		<div id = "dateC1">
			<div id = "dateC2">
				<p id = "dateDisplay">01.01.2019</p>
			</div>
		</div>
	</div>
	<div id = "right">
		<input type = "image" id = "about" src = "./images/i.png">
		<div id = "aboutText">
			<p>
				<h2>Backstory</h2>
This is a simulation of SO<sub>2</sub> emission deposition onto surrounding land from a factory. Our main point of inspiration came from an <a href = "https://www.lsm.lv/raksts/zinas/latvija/kalnciema-proteste-pret-akumulatoru-rupnicu.a361357/" target="_blank">article</a> about a factory set to be built in Kalnciems, Latvia, and its overwhelming criticism from the inhabitants of Kalnciems. The main issue is the potential pollution it could cause to the surrounding area, how it could affect wildlife as well as lakes, rivers, etc. So we decided to model this deposition of SO<sub>2</sub> in reference to this factory in Kalnciems to see if the results are as bad as they are predicted to be. 
<br><h2>
Controls</h2> <br>
The simulation can be started by pressing the play button in the centre of the taskbar. It might take a couple of seconds for the simulation to get calculated. As the simulation plays, the daily SO<sub>2</sub> deposition at every location (as kg/m<sup>2</sup>) is shown for each day. To the left, there is a toggle for the wind overlay - the wind overlay shows the average wind direction and speed in that day, and has a direct correlation to the SO<sub>2</sub> deposition. To the right, there is a toggle for the accumulative deposition - it shows the total SO<sub>2</sub> accumulated from all of the previously simulated days. There are also 4 sliders to adjust. You can adjust, starting from the left: <br/>  1) The maximum value of the heatmap - what value of SO<sub>2</sub> accumulation should be red (0.5 - 70) <br/>  2) The scrubbing efficiency of the SO<sub>2</sub> in the factory/the effectiveness of the SO<sub>2</sub> filters installed in the factory (0-100%) <br/>  3) The resolution of data points, how many data points are calculated (1000 - 20000) <br/>  4) The sorption factor of the environment (0 - 1)
<br><h2>
Technical details</h2> <br>
For the SO<sub>2</sub> deposition model, we used this <a href = "https://doi.org/10.1016/0269-7491(95)00041-0" target="_blank">paper</a> and chose to use the approximated formulae with an r<sup>2</sup> = 0.973 for quicker calculations. We predicted/estimated the chimney/smokestack height to be 30m (this <a href = "http://environmentclearance.nic.in/writereaddata/Online/TOR/20_Jul_2018_210804070R6TNR0QZExidePrefeasibilityReport.pdf" target="_blank">factory</a> of similar purpose has a stack height of 30m). The wind data was taken from this <a href = "https://www.meteo.lv/meteorologija-datu-meklesana/?nid=461">database</a> outlying the average wind direction and speed every day in 2019 of the station of Jelgava, which is the nearest available point to Kalnciems. Numerous technologies were used in the creation of this simulation. We used leaflet.js and plugins leaflet.heat and leaflet.velocity for the map. Most of the code was written in ES2015 JavaScript and packaged with WebPack, but for a quicker and more responsive simulation code for calculations was written in C and compiled to WebAssembly. 

			</p>
		</div>
		<div id = "aboutName">
			<h2>About<h2>
		</div>
	</div>
	<div id = "bgLoad">
		<div class="lds-ring"><div></div><div></div><div></div><div></div></div>
	</div>
	
	<script src="bundle.js"></script>
</body>
</html>